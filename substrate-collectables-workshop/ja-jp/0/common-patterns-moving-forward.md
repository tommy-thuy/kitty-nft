進める上でよくあるパターン
===

## Rustのコンパイラーは友達！

Rustのような強く型付けされたプログラミング言語を使うことの多くの利点の一つ

[TODO：RUSTはあなたの１番の友達となり、安全なコーディングの手助けをしてくれます。]

## Runtimeをアップデートする

カスタムSubstrateランタイムの作成に入る前に、コードを実行するのに役立ついくつかのパターンに慣れておく必要があります。

Substrateランタイムコードは2つのバージョンにコンパイルされています。

- [WebAssembly](https://webassembly.org/)(Wasm)ファイル
- 標準バイナリ実行ファイル

Wasmファイルは標準バイナリのコンパイルの一部として使用されるので、実行可能ファイルをビルドする前に必ずWasmイメージを最初にコンパイルする必要があります。

パターンは次のようになります：

```bash
./scripts/build.sh               // Wasmのビルド
cargo build --release    // binaryのビルド
```

さらに、ノードに変更が加えられても、以前のバージョンノードで作られた古いブロックは存続します。ノードを再起動した場合、ブロック生産は中断したところから再開します。

ただし、ランタイムに対する変更が必要な場合は、次のコマンドを使用して、以前のすべてのブロックのチェーンデータを削除する必要があります：

```bash
./target/release/substratekitties purge-chain --dev
```

上のコマンドを実行すると、最新の変更を反映してフレッシュなノードを始めることができます。

```bash
./target/release/substratekitties --dev
```

今回紹介したパターンは開発で重要になるので、覚えてください。

---
**発展**

Substrateをハックするときは、常に最新バージョンのRust stableとnightlyを使用してください。

新しいプロジェクトを始めるときには、毎回走らせるべきもう一つのスクリプトを `build.sh`と同じディレクトリに提供します：

```bash
./scripts/init.sh
```

このスクリプトはRustを更新し、予期せぬコンパイルエラーを起こさないようにします。

---
